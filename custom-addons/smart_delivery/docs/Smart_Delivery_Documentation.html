<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Delivery - Documentation ComplÃ¨te | Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', 'Tajawal', sans-serif;
            line-height: 1.8;
            color: #333;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Cover Page */
        .cover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 40px;
            text-align: center;
            margin-bottom: 40px;
            border-radius: 10px;
        }
        
        .cover h1 {
            font-size: 3em;
            margin-bottom: 20px;
        }
        
        .cover .subtitle {
            font-size: 1.5em;
            opacity: 0.9;
        }
        
        .cover .version {
            margin-top: 30px;
            font-size: 1.2em;
            opacity: 0.8;
        }
        
        /* Language Sections */
        .lang-section {
            background: white;
            padding: 40px;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .french {
            direction: ltr;
            text-align: left;
        }
        
        .arabic {
            direction: rtl;
            text-align: right;
            font-family: 'Tajawal', sans-serif;
        }
        
        .lang-header {
            background: #667eea;
            color: white;
            padding: 15px 25px;
            margin: -40px -40px 30px -40px;
            border-radius: 10px 10px 0 0;
            font-size: 1.3em;
        }
        
        h2 {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            margin: 30px 0 20px 0;
        }
        
        h3 {
            color: #764ba2;
            margin: 25px 0 15px 0;
        }
        
        h4 {
            color: #555;
            margin: 20px 0 10px 0;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        ul, ol {
            margin: 15px 0 15px 25px;
        }
        
        .arabic ul, .arabic ol {
            margin: 15px 25px 15px 0;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        .arabic th, .arabic td {
            text-align: right;
        }
        
        th {
            background: #667eea;
            color: white;
        }
        
        tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        /* Code blocks */
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        
        /* Boxes */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .arabic .info-box {
            border-left: none;
            border-right: 4px solid #2196f3;
            border-radius: 8px 0 0 8px;
        }
        
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .arabic .warning-box {
            border-left: none;
            border-right: 4px solid #ff9800;
            border-radius: 8px 0 0 8px;
        }
        
        /* Diagram */
        .diagram {
            background: #fafafa;
            border: 2px solid #ddd;
            padding: 30px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
        }
        
        .diagram-box {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 15px 25px;
            margin: 10px;
            border-radius: 8px;
            min-width: 150px;
        }
        
        .diagram-arrow {
            display: inline-block;
            font-size: 24px;
            color: #667eea;
            margin: 0 10px;
        }
        
        /* Print styles */
        @media print {
            body {
                background: white;
            }
            
            .container {
                max-width: 100%;
            }
            
            .lang-section {
                box-shadow: none;
                page-break-inside: avoid;
            }
            
            h2 {
                page-break-after: avoid;
            }
            
            table, pre {
                page-break-inside: avoid;
            }
        }
        
        /* TOC */
        .toc {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .toc h3 {
            margin-top: 0;
        }
        
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        
        .toc li {
            padding: 5px 0;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Cover Page -->
        <div class="cover">
            <h1>ğŸšš Smart Delivery</h1>
            <div class="subtitle">
                Documentation Technique ComplÃ¨te<br>
                Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØªÙ‚Ù†ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„
            </div>
            <div class="version">
                Version 18.0.1.4.0 | Odoo 18<br>
                Module de Gestion de Livraison Intelligent<br>
                ÙˆØ­Ø¯Ø© Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠØ©
            </div>
        </div>

        <!-- ==================== FRENCH SECTION ==================== -->
        <div class="lang-section french">
            <div class="lang-header">ğŸ‡«ğŸ‡· Documentation en FranÃ§ais</div>
            
            <!-- Table of Contents -->
            <div class="toc">
                <h3>ğŸ“‘ Table des MatiÃ¨res</h3>
                <ul>
                    <li>1. <a href="#fr-intro">Introduction et Vue d'Ensemble</a></li>
                    <li>2. <a href="#fr-architecture">Architecture Technique</a></li>
                    <li>3. <a href="#fr-models">ModÃ¨les de DonnÃ©es</a></li>
                    <li>4. <a href="#fr-workflow">Flux de Travail</a></li>
                    <li>5. <a href="#fr-odoo">Modules Odoo UtilisÃ©s</a></li>
                    <li>6. <a href="#fr-security">SÃ©curitÃ© et Permissions</a></li>
                    <li>7. <a href="#fr-api">API REST</a></li>
                    <li>8. <a href="#fr-billing">Facturation</a></li>
                    <li>9. <a href="#fr-installation">Installation</a></li>
                </ul>
            </div>

            <h2 id="fr-intro">1. Introduction et Vue d'Ensemble</h2>
            
            <h3>1.1 Description du Projet</h3>
            <p><strong>Smart Delivery</strong> est un module Odoo 18 complet pour la gestion intelligente des livraisons. Il offre un systÃ¨me de dispatching automatique des livreurs, une validation multi-niveaux des livraisons (OTP, signature, photo, biomÃ©trie), et une API REST complÃ¨te avec authentification JWT pour les applications mobiles.</p>
            
            <div class="info-box">
                <strong>CaractÃ©ristiques Principales:</strong>
                <ul>
                    <li>Dispatching automatique basÃ© sur la distance, notation et disponibilitÃ©</li>
                    <li>Validation OTP, signature Ã©lectronique, photo et biomÃ©trique</li>
                    <li>API REST avec authentification JWT</li>
                    <li>Suivi GPS en temps rÃ©el</li>
                    <li>Gestion multi-entreprises</li>
                    <li>Facturation automatique intÃ©grÃ©e avec Odoo Accounting</li>
                </ul>
            </div>

            <h3>1.2 Acteurs du SystÃ¨me</h3>
            <table>
                <tr>
                    <th>Acteur</th>
                    <th>Description</th>
                    <th>AccÃ¨s</th>
                </tr>
                <tr>
                    <td><strong>Administrateur</strong></td>
                    <td>Gestion complÃ¨te du systÃ¨me, configuration des rÃ¨gles, approbation des inscriptions</td>
                    <td>Backend Odoo + API</td>
                </tr>
                <tr>
                    <td><strong>Entreprise</strong></td>
                    <td>Client qui envoie des colis. Peut crÃ©er et suivre ses commandes</td>
                    <td>Backend Odoo (limitÃ©) + API</td>
                </tr>
                <tr>
                    <td><strong>Livreur</strong></td>
                    <td>Effectue les livraisons, met Ã  jour sa position, valide les conditions</td>
                    <td>API uniquement (App Mobile)</td>
                </tr>
                <tr>
                    <td><strong>Destinataire</strong></td>
                    <td>ReÃ§oit le colis, fournit OTP/signature si requis</td>
                    <td>Interaction via livreur</td>
                </tr>
            </table>

            <h2 id="fr-architecture">2. Architecture Technique</h2>
            
            <h3>2.1 Structure du Module</h3>
            <pre><code>smart_delivery/
â”œâ”€â”€ __manifest__.py          # Configuration du module
â”œâ”€â”€ __init__.py              # Imports Python
â”œâ”€â”€ hooks.py                 # Hooks d'installation/migration
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ api.py               # ContrÃ´leur API REST (4000+ lignes)
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ delivery_order.py    # Commandes de livraison
â”‚   â”œâ”€â”€ livreur.py           # Gestion des livreurs
â”‚   â”œâ”€â”€ enterprise.py        # Gestion des entreprises
â”‚   â”œâ”€â”€ sector_rule.py       # RÃ¨gles de secteur et tarification
â”‚   â”œâ”€â”€ delivery_condition.py # Conditions de validation
â”‚   â”œâ”€â”€ billing.py           # Facturation
â”‚   â”œâ”€â”€ delivery_route.py    # ItinÃ©raires GPS
â”‚   â”œâ”€â”€ api_log.py           # Journal des appels API
â”‚   â”œâ”€â”€ res_users.py         # Extension utilisateurs
â”‚   â”œâ”€â”€ res_partner.py       # Extension partenaires
â”‚   â””â”€â”€ account_move.py      # Extension factures
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ security_groups.xml  # Groupes de sÃ©curitÃ©
â”‚   â”œâ”€â”€ ir.model.access.csv  # Droits d'accÃ¨s
â”‚   â””â”€â”€ security_rules.xml   # RÃ¨gles d'enregistrement
â”œâ”€â”€ views/                   # Vues XML
â”œâ”€â”€ data/                    # DonnÃ©es initiales
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ jwt_auth.py          # Authentification JWT
â””â”€â”€ docs/                    # Documentation</code></pre>

            <h3>2.2 DÃ©pendances</h3>
            <table>
                <tr>
                    <th>Type</th>
                    <th>DÃ©pendance</th>
                    <th>Utilisation</th>
                </tr>
                <tr>
                    <td>Module Odoo</td>
                    <td><code>base</code></td>
                    <td>FonctionnalitÃ©s de base, utilisateurs, partenaires</td>
                </tr>
                <tr>
                    <td>Module Odoo</td>
                    <td><code>web</code></td>
                    <td>Interface web, contrÃ´leurs HTTP</td>
                </tr>
                <tr>
                    <td>Module Odoo</td>
                    <td><code>mail</code></td>
                    <td>Chatter, tracking des modifications, activitÃ©s</td>
                </tr>
                <tr>
                    <td>Module Odoo</td>
                    <td><code>contacts</code></td>
                    <td>Gestion des contacts (expÃ©diteurs, destinataires)</td>
                </tr>
                <tr>
                    <td>Module Odoo</td>
                    <td><code>account</code></td>
                    <td>ComptabilitÃ©, gÃ©nÃ©ration de factures</td>
                </tr>
                <tr>
                    <td>Module Odoo</td>
                    <td><code>sale</code></td>
                    <td>Produits de service pour la facturation</td>
                </tr>
                <tr>
                    <td>Python</td>
                    <td><code>PyJWT</code></td>
                    <td>GÃ©nÃ©ration et validation des tokens JWT</td>
                </tr>
                <tr>
                    <td>Python</td>
                    <td><code>cryptography</code></td>
                    <td>Cryptographie pour JWT</td>
                </tr>
            </table>

            <h2 id="fr-models">3. ModÃ¨les de DonnÃ©es</h2>
            
            <h3>3.1 delivery.order - Commande de Livraison</h3>
            <p>ModÃ¨le principal reprÃ©sentant une commande de livraison.</p>
            
            <table>
                <tr>
                    <th>Champ</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr><td>name</td><td>Char</td><td>RÃ©fÃ©rence auto-gÃ©nÃ©rÃ©e (DEL00001)</td></tr>
                <tr><td>reference</td><td>Char</td><td>RÃ©fÃ©rence externe optionnelle</td></tr>
                <tr><td>sector_type</td><td>Selection</td><td>standard, premium, express, fragile, medical</td></tr>
                <tr><td>sender_id</td><td>Many2one</td><td>Entreprise expÃ©ditrice (res.partner)</td></tr>
                <tr><td>receiver_name</td><td>Char</td><td>Nom du destinataire</td></tr>
                <tr><td>receiver_phone</td><td>Char</td><td>TÃ©lÃ©phone du destinataire</td></tr>
                <tr><td>pickup_lat/long</td><td>Float</td><td>CoordonnÃ©es GPS point de collecte</td></tr>
                <tr><td>drop_lat/long</td><td>Float</td><td>CoordonnÃ©es GPS point de livraison</td></tr>
                <tr><td>assigned_livreur_id</td><td>Many2one</td><td>Livreur assignÃ©</td></tr>
                <tr><td>status</td><td>Selection</td><td>draft, assigned, on_way, delivered, failed</td></tr>
                <tr><td>otp_required</td><td>Boolean</td><td>OTP requis pour validation</td></tr>
                <tr><td>signature_required</td><td>Boolean</td><td>Signature requise</td></tr>
                <tr><td>photo_required</td><td>Boolean</td><td>Photo requise</td></tr>
                <tr><td>biometric_required</td><td>Boolean</td><td>BiomÃ©trie requise</td></tr>
                <tr><td>distance_km</td><td>Float</td><td>Distance calculÃ©e (Haversine)</td></tr>
            </table>

            <h3>3.2 delivery.livreur - Livreur</h3>
            <p>Gestion des livreurs avec documents d'identification obligatoires.</p>
            
            <table>
                <tr>
                    <th>Champ</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr><td>name</td><td>Char</td><td>Nom complet</td></tr>
                <tr><td>phone</td><td>Char</td><td>NumÃ©ro de tÃ©lÃ©phone</td></tr>
                <tr><td>email</td><td>Char</td><td>Email (login)</td></tr>
                <tr><td>nni</td><td>Char</td><td>NumÃ©ro National d'Identification</td></tr>
                <tr><td>nni_photo</td><td>Binary</td><td>Photo du document NNI</td></tr>
                <tr><td>livreur_photo</td><td>Binary</td><td>Photo d'identitÃ©</td></tr>
                <tr><td>carte_grise_photo</td><td>Binary</td><td>Photo carte grise vÃ©hicule</td></tr>
                <tr><td>assurance_photo</td><td>Binary</td><td>Photo assurance</td></tr>
                <tr><td>vehicle_type</td><td>Selection</td><td>motorcycle, car, bicycle, truck</td></tr>
                <tr><td>sector_ids</td><td>Many2many</td><td>Types de secteurs autorisÃ©s</td></tr>
                <tr><td>availability</td><td>Boolean</td><td>DisponibilitÃ© actuelle</td></tr>
                <tr><td>rating</td><td>Float</td><td>Note moyenne (0-5)</td></tr>
                <tr><td>current_lat/long</td><td>Float</td><td>Position GPS actuelle</td></tr>
                <tr><td>verified</td><td>Boolean</td><td>Compte vÃ©rifiÃ©</td></tr>
                <tr><td>registration_status</td><td>Selection</td><td>pending, approved, rejected</td></tr>
                <tr><td>user_id</td><td>Many2one</td><td>Utilisateur Odoo liÃ© (auto-crÃ©Ã©)</td></tr>
            </table>

            <h3>3.3 delivery.enterprise - Entreprise Cliente</h3>
            <p>Entreprises qui utilisent le service de livraison.</p>
            
            <table>
                <tr>
                    <th>Champ</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr><td>name</td><td>Char</td><td>Nom de l'entreprise</td></tr>
                <tr><td>email</td><td>Char</td><td>Email (login)</td></tr>
                <tr><td>phone</td><td>Char</td><td>TÃ©lÃ©phone</td></tr>
                <tr><td>logo</td><td>Binary</td><td>Logo de l'entreprise</td></tr>
                <tr><td>address, city</td><td>Char/Text</td><td>Adresse</td></tr>
                <tr><td>registration_status</td><td>Selection</td><td>pending, approved, rejected</td></tr>
                <tr><td>user_id</td><td>Many2one</td><td>Utilisateur Odoo liÃ©</td></tr>
                <tr><td>partner_id</td><td>Many2one</td><td>Contact partenaire liÃ©</td></tr>
            </table>

            <h3>3.4 sector.rule - RÃ¨gles de Secteur</h3>
            <p>Configuration des types de livraison et leur tarification.</p>
            
            <table>
                <tr>
                    <th>Type de Secteur</th>
                    <th>Prix Base (MRU)</th>
                    <th>Frais/km</th>
                    <th>Exigences</th>
                </tr>
                <tr>
                    <td><strong>Standard</strong></td>
                    <td>50</td>
                    <td>10</td>
                    <td>Aucune</td>
                </tr>
                <tr>
                    <td><strong>Premium</strong></td>
                    <td>100</td>
                    <td>10</td>
                    <td>OTP + Signature</td>
                </tr>
                <tr>
                    <td><strong>Express</strong></td>
                    <td>150</td>
                    <td>15</td>
                    <td>OTP + Photo</td>
                </tr>
                <tr>
                    <td><strong>Fragile</strong></td>
                    <td>120</td>
                    <td>12</td>
                    <td>OTP + Signature + Photo</td>
                </tr>
                <tr>
                    <td><strong>MÃ©dical</strong></td>
                    <td>200</td>
                    <td>20</td>
                    <td>OTP + Signature + Photo + BiomÃ©trie</td>
                </tr>
            </table>
            
            <div class="info-box">
                <strong>Note:</strong> Les 5 premiers kilomÃ¨tres sont inclus dans le prix de base. Les frais kilomÃ©triques s'appliquent au-delÃ .
            </div>

            <h3>3.5 delivery.condition - Conditions de Validation</h3>
            <table>
                <tr>
                    <th>Champ</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr><td>order_id</td><td>Many2one</td><td>Commande associÃ©e</td></tr>
                <tr><td>otp_value</td><td>Char</td><td>Code OTP gÃ©nÃ©rÃ© (6 chiffres)</td></tr>
                <tr><td>otp_verified</td><td>Boolean</td><td>OTP vÃ©rifiÃ©</td></tr>
                <tr><td>signature_file</td><td>Binary</td><td>Fichier signature</td></tr>
                <tr><td>photo</td><td>Binary</td><td>Photo de livraison</td></tr>
                <tr><td>biometric_score</td><td>Float</td><td>Score biomÃ©trique (min 0.7)</td></tr>
                <tr><td>validated</td><td>Boolean</td><td>Toutes conditions validÃ©es</td></tr>
            </table>

            <h3>3.6 delivery.billing - Facturation</h3>
            <table>
                <tr>
                    <th>Champ</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr><td>order_id</td><td>Many2one</td><td>Commande associÃ©e</td></tr>
                <tr><td>distance_km</td><td>Float</td><td>Distance de livraison</td></tr>
                <tr><td>base_tariff</td><td>Float</td><td>Tarif de base</td></tr>
                <tr><td>extra_fee</td><td>Float</td><td>Frais de distance supplÃ©mentaires</td></tr>
                <tr><td>total_amount</td><td>Float</td><td>Montant total</td></tr>
                <tr><td>state</td><td>Selection</td><td>draft, confirmed, paid, cancelled</td></tr>
                <tr><td>invoice_id</td><td>Many2one</td><td>Facture Odoo gÃ©nÃ©rÃ©e</td></tr>
            </table>

            <h2 id="fr-workflow">4. Flux de Travail</h2>
            
            <h3>4.1 Cycle de Vie d'une Commande</h3>
            <div class="diagram">
                <div class="diagram-box">ğŸ“ Brouillon<br>(draft)</div>
                <span class="diagram-arrow">â†’</span>
                <div class="diagram-box">ğŸ‘¤ AssignÃ©<br>(assigned)</div>
                <span class="diagram-arrow">â†’</span>
                <div class="diagram-box">ğŸšš En Route<br>(on_way)</div>
                <span class="diagram-arrow">â†’</span>
                <div class="diagram-box">âœ… LivrÃ©<br>(delivered)</div>
            </div>
            
            <h3>4.2 Processus DÃ©taillÃ©</h3>
            <ol>
                <li><strong>CrÃ©ation de Commande</strong>
                    <ul>
                        <li>L'entreprise crÃ©e une commande via le backend Odoo ou l'API</li>
                        <li>Les coordonnÃ©es GPS de collecte et livraison sont dÃ©finies</li>
                        <li>Le type de secteur dÃ©termine les exigences de validation</li>
                        <li>Un OTP est gÃ©nÃ©rÃ© si requis</li>
                    </ul>
                </li>
                <li><strong>Dispatching Automatique</strong>
                    <ul>
                        <li>Le systÃ¨me calcule un score pour chaque livreur disponible</li>
                        <li>Score = (Distance Ã— 50%) + (Note Ã— 20%) + (Repos Ã— 10%) + (Vitesse Ã— 20%)</li>
                        <li>Le livreur avec le meilleur score est automatiquement assignÃ©</li>
                    </ul>
                </li>
                <li><strong>ExÃ©cution de la Livraison</strong>
                    <ul>
                        <li>Le livreur accepte la commande via l'app mobile</li>
                        <li>Il collecte le colis et passe en statut "En Route"</li>
                        <li>Sa position GPS est mise Ã  jour en temps rÃ©el</li>
                    </ul>
                </li>
                <li><strong>Validation et Livraison</strong>
                    <ul>
                        <li>Ã€ l'arrivÃ©e, le livreur soumet les preuves requises</li>
                        <li>Le destinataire fournit l'OTP reÃ§u par SMS</li>
                        <li>Signature capturÃ©e si requise</li>
                        <li>Photo de preuve prise si requise</li>
                        <li>VÃ©rification biomÃ©trique si requise (mÃ©dical)</li>
                    </ul>
                </li>
                <li><strong>Facturation</strong>
                    <ul>
                        <li>La facturation est gÃ©nÃ©rÃ©e automatiquement Ã  la livraison</li>
                        <li>Une facture Odoo est crÃ©Ã©e avec les lignes dÃ©taillÃ©es</li>
                        <li>Paiement en espÃ¨ces Ã  la livraison (COD)</li>
                    </ul>
                </li>
            </ol>

            <h3>4.3 Inscription des Livreurs</h3>
            <ol>
                <li>Le livreur s'inscrit via l'API mobile avec ses documents</li>
                <li>Statut initial: <strong>En attente</strong> (pending)</li>
                <li>L'admin vÃ©rifie les documents soumis</li>
                <li>Approbation â†’ Compte activÃ©, peut recevoir des commandes</li>
                <li>Rejet â†’ Notification avec motif, peut soumettre Ã  nouveau</li>
            </ol>

            <h2 id="fr-odoo">5. Modules Odoo UtilisÃ©s</h2>
            
            <h3>5.1 Module Base (base)</h3>
            <ul>
                <li><strong>res.users</strong>: Ã‰tendu pour ajouter le type d'utilisateur delivery (admin, enterprise, livreur)</li>
                <li><strong>res.partner</strong>: Ã‰tendu pour marquer les entreprises de livraison</li>
                <li><strong>ir.sequence</strong>: SÃ©quence DEL00001 pour les commandes</li>
                <li><strong>ir.model.access</strong>: Droits d'accÃ¨s aux modÃ¨les</li>
                <li><strong>ir.rule</strong>: RÃ¨gles de sÃ©curitÃ© par enregistrement</li>
            </ul>

            <h3>5.2 Module Mail (mail)</h3>
            <ul>
                <li><strong>mail.thread</strong>: HÃ©ritÃ© par delivery.order, delivery.livreur, delivery.enterprise</li>
                <li>Permet le chatter (historique des messages)</li>
                <li>Tracking automatique des changements de champs</li>
                <li><strong>mail.activity.mixin</strong>: Gestion des activitÃ©s planifiÃ©es</li>
            </ul>

            <h3>5.3 Module Account (account)</h3>
            <ul>
                <li><strong>account.move</strong>: CrÃ©ation de factures client</li>
                <li><strong>account.move.line</strong>: Lignes de facture (service + frais distance)</li>
                <li><strong>account.payment</strong>: Enregistrement des paiements</li>
                <li><strong>account.journal</strong>: Journaux de vente et caisse</li>
                <li><strong>account.account</strong>: Comptes comptables (revenus)</li>
            </ul>

            <h3>5.4 Module Sale (sale)</h3>
            <ul>
                <li><strong>product.product</strong>: Produits de service pour chaque type de livraison</li>
                <li><strong>product.category</strong>: CatÃ©gorie "Services de Livraison"</li>
                <li>Produits crÃ©Ã©s: DEL-STD, DEL-PRM, DEL-EXP, DEL-FRG, DEL-MED, DEL-DIST</li>
            </ul>

            <h3>5.5 Module Web (web)</h3>
            <ul>
                <li><strong>http.Controller</strong>: Base des contrÃ´leurs API REST</li>
                <li>Gestion des requÃªtes HTTP, JSON, authentification</li>
                <li>CSRF dÃ©sactivÃ© pour les endpoints API</li>
            </ul>

            <h2 id="fr-security">6. SÃ©curitÃ© et Permissions</h2>
            
            <h3>6.1 Groupes de SÃ©curitÃ©</h3>
            <table>
                <tr>
                    <th>Groupe</th>
                    <th>HÃ©rite de</th>
                    <th>Permissions</th>
                </tr>
                <tr>
                    <td><strong>Livreur</strong><br>(group_livreur)</td>
                    <td>-</td>
                    <td>API uniquement, pas d'accÃ¨s backend Odoo</td>
                </tr>
                <tr>
                    <td><strong>Entreprise</strong><br>(group_enterprise)</td>
                    <td>base.group_user</td>
                    <td>AccÃ¨s Smart Delivery, voir/crÃ©er ses commandes</td>
                </tr>
                <tr>
                    <td><strong>Admin</strong><br>(group_admin)</td>
                    <td>group_enterprise</td>
                    <td>AccÃ¨s total, configuration, suppression</td>
                </tr>
            </table>

            <h3>6.2 RÃ¨gles d'AccÃ¨s (ir.model.access)</h3>
            <table>
                <tr>
                    <th>ModÃ¨le</th>
                    <th>Admin</th>
                    <th>Entreprise</th>
                    <th>Livreur</th>
                </tr>
                <tr>
                    <td>delivery.order</td>
                    <td>CRUD</td>
                    <td>CRU (pas delete)</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>delivery.livreur</td>
                    <td>CRUD</td>
                    <td>R (lecture seule)</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>delivery.enterprise</td>
                    <td>CRUD</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>sector.rule</td>
                    <td>CRUD</td>
                    <td>R</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>delivery.billing</td>
                    <td>CRUD</td>
                    <td>R</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>api.log</td>
                    <td>CRUD</td>
                    <td>-</td>
                    <td>-</td>
                </tr>
            </table>

            <div class="info-box">
                <strong>Note:</strong> Les livreurs n'ont pas d'accÃ¨s au backend Odoo. Toutes leurs opÃ©rations passent par l'API REST qui utilise <code>sudo()</code> pour les opÃ©rations autorisÃ©es.
            </div>

            <h2 id="fr-api">7. API REST</h2>
            
            <h3>7.1 Authentification JWT</h3>
            <p>Toutes les requÃªtes API (sauf login et inscription) nÃ©cessitent un token JWT dans le header:</p>
            <pre><code>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>
            
            <h3>7.2 Endpoints Principaux</h3>
            
            <h4>ğŸ” Authentification</h4>
            <table>
                <tr>
                    <th>MÃ©thode</th>
                    <th>Endpoint</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/auth/login</td>
                    <td>Connexion, retourne token JWT</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/auth/logout</td>
                    <td>DÃ©connexion</td>
                </tr>
            </table>

            <h4>ğŸ“ Inscription (Public)</h4>
            <table>
                <tr>
                    <th>MÃ©thode</th>
                    <th>Endpoint</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/sectors</td>
                    <td>Liste des secteurs disponibles</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/register</td>
                    <td>Inscription livreur</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/enterprise/register</td>
                    <td>Inscription entreprise</td>
                </tr>
            </table>

            <h4>ğŸ“¦ Commandes (Entreprise)</h4>
            <table>
                <tr>
                    <th>MÃ©thode</th>
                    <th>Endpoint</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/enterprise/orders</td>
                    <td>Liste des commandes de l'entreprise</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/enterprise/orders/create</td>
                    <td>CrÃ©er une commande</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/enterprise/orders/{id}</td>
                    <td>DÃ©tails d'une commande</td>
                </tr>
            </table>

            <h4>ğŸšš Livreur</h4>
            <table>
                <tr>
                    <th>MÃ©thode</th>
                    <th>Endpoint</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/livreur/profile</td>
                    <td>Profil du livreur</td>
                </tr>
                <tr>
                    <td>PUT</td>
                    <td>/smart_delivery/api/livreur/profile</td>
                    <td>Mettre Ã  jour le profil</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/location</td>
                    <td>Mettre Ã  jour la position GPS</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/availability</td>
                    <td>Changer la disponibilitÃ©</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/livreur/orders</td>
                    <td>Commandes assignÃ©es</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/orders/{id}/accept</td>
                    <td>Accepter une commande</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/orders/{id}/start</td>
                    <td>DÃ©marrer la livraison</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/orders/{id}/complete</td>
                    <td>Terminer avec validation</td>
                </tr>
            </table>

            <h4>âœ… Validation</h4>
            <table>
                <tr>
                    <th>MÃ©thode</th>
                    <th>Endpoint</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/verify-otp</td>
                    <td>VÃ©rifier le code OTP</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/signature</td>
                    <td>Soumettre la signature</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/photo</td>
                    <td>Soumettre la photo</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/biometric</td>
                    <td>Soumettre le score biomÃ©trique</td>
                </tr>
            </table>

            <h3>7.3 Exemple de RequÃªte Login</h3>
            <pre><code>POST /smart_delivery/api/auth/login
Content-Type: application/json

{
    "login": "livreur@example.com",
    "password": "password123"
}

// RÃ©ponse:
{
    "success": true,
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
        "id": 5,
        "name": "Ahmed Livreur",
        "login": "livreur@example.com",
        "type": "livreur"
    },
    "livreur": {
        "id": 3,
        "name": "Ahmed Livreur",
        "phone": "+22212345678",
        "vehicle_type": "motorcycle",
        "availability": true,
        "registration_status": "approved"
    },
    "expires_in": 86400
}</code></pre>

            <h2 id="fr-billing">8. Facturation</h2>
            
            <h3>8.1 Calcul du Tarif</h3>
            <pre><code>Montant Total = Prix de Base + Frais de Distance

Frais de Distance = max(0, distance_km - distance_gratuite) Ã— frais_par_km

Exemple pour livraison Express de 12 km:
- Prix de Base: 150 MRU
- Distance gratuite: 5 km
- Frais/km: 15 MRU
- Frais de distance: (12 - 5) Ã— 15 = 105 MRU
- Total: 150 + 105 = 255 MRU</code></pre>

            <h3>8.2 GÃ©nÃ©ration de Facture</h3>
            <p>La facture Odoo est crÃ©Ã©e automatiquement avec:</p>
            <ul>
                <li><strong>Ligne 1:</strong> Service de Livraison [Type] - Commande DEL00001</li>
                <li><strong>Ligne 2:</strong> Frais de distance (X km au-delÃ  de 5km)</li>
            </ul>

            <h3>8.3 Paiement COD</h3>
            <p>Mode de paiement unique: <strong>EspÃ¨ces Ã  la livraison</strong> (Cash On Delivery)</p>
            <ul>
                <li>Le livreur collecte le paiement du destinataire</li>
                <li>Le bouton "Marquer comme payÃ©" dans le backend crÃ©e le rÃ¨glement</li>
                <li>RÃ©conciliation automatique avec la facture</li>
            </ul>

            <h2 id="fr-installation">9. Installation</h2>
            
            <h3>9.1 PrÃ©requis</h3>
            <pre><code># Installer les dÃ©pendances Python
pip install PyJWT cryptography</code></pre>

            <h3>9.2 Installation du Module</h3>
            <ol>
                <li>Copier le dossier <code>smart_delivery</code> dans le rÃ©pertoire addons</li>
                <li>Mettre Ã  jour la liste des applications dans Odoo</li>
                <li>Rechercher "Smart Delivery" et cliquer sur Installer</li>
            </ol>

            <h3>9.3 Configuration Post-Installation</h3>
            <ol>
                <li>Configurer la comptabilitÃ© (Plan comptable)</li>
                <li>VÃ©rifier les produits de service crÃ©Ã©s</li>
                <li>Configurer les rÃ¨gles de secteur si nÃ©cessaire</li>
                <li>CrÃ©er le premier utilisateur administrateur</li>
            </ol>

            <div class="warning-box">
                <strong>Important:</strong> En production, changez la clÃ© secrÃ¨te JWT dans <code>utils/jwt_auth.py</code>
            </div>
        </div>

        <!-- ==================== ARABIC SECTION ==================== -->
        <div class="lang-section arabic">
            <div class="lang-header">ğŸ‡²ğŸ‡¦ Ø§Ù„ØªÙˆØ«ÙŠÙ‚ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
            
            <!-- Table of Contents -->
            <div class="toc">
                <h3>ğŸ“‘ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª</h3>
                <ul>
                    <li>1. <a href="#ar-intro">Ù…Ù‚Ø¯Ù…Ø© ÙˆÙ†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</a></li>
                    <li>2. <a href="#ar-architecture">Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©</a></li>
                    <li>3. <a href="#ar-models">Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</a></li>
                    <li>4. <a href="#ar-workflow">Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„</a></li>
                    <li>5. <a href="#ar-odoo">ÙˆØ­Ø¯Ø§Øª Odoo Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</a></li>
                    <li>6. <a href="#ar-security">Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</a></li>
                    <li>7. <a href="#ar-api">ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª REST</a></li>
                    <li>8. <a href="#ar-billing">Ø§Ù„ÙÙˆØªØ±Ø©</a></li>
                    <li>9. <a href="#ar-installation">Ø§Ù„ØªØ«Ø¨ÙŠØª</a></li>
                </ul>
            </div>

            <h2 id="ar-intro">1. Ù…Ù‚Ø¯Ù…Ø© ÙˆÙ†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©</h2>
            
            <h3>1.1 ÙˆØµÙ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3>
            <p><strong>Smart Delivery</strong> Ù‡Ùˆ ÙˆØ­Ø¯Ø© Odoo 18 Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ. ÙŠÙˆÙØ± Ù†Ø¸Ø§Ù… ØªÙˆØ²ÙŠØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†ØŒ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ù† Ø§Ù„ØªØ³Ù„ÙŠÙ… (OTPØŒ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ØŒ Ø§Ù„ØµÙˆØ±Ø©ØŒ Ø§Ù„Ø¨ÙŠÙˆÙ…ØªØ±ÙŠØ©)ØŒ ÙˆÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª REST ÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ù…ØµØ§Ø¯Ù‚Ø© JWT Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø­Ù…ÙˆÙ„.</p>
            
            <div class="info-box">
                <strong>Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:</strong>
                <ul>
                    <li>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§ÙØ© ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ… ÙˆØ§Ù„ØªÙˆÙØ±</li>
                    <li>Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± OTPØŒ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŒ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ§Ù„Ø¨ÙŠÙˆÙ…ØªØ±ÙŠØ©</li>
                    <li>ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª REST Ù…Ø¹ Ù…ØµØ§Ø¯Ù‚Ø© JWT</li>
                    <li>ØªØªØ¨Ø¹ GPS ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ</li>
                    <li>Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª</li>
                    <li>Ø§Ù„ÙÙˆØªØ±Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø© Ù…Ø¹ Ù…Ø­Ø§Ø³Ø¨Ø© Odoo</li>
                </ul>
            </div>

            <h3>1.2 Ø§Ù„Ø¬Ù‡Ø§Øª Ø§Ù„ÙØ§Ø¹Ù„Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
            <table>
                <tr>
                    <th>Ø§Ù„Ø¬Ù‡Ø©</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                    <th>Ø§Ù„ÙˆØµÙˆÙ„</th>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</strong></td>
                    <td>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙƒØ§Ù…Ù„Ø©ØŒ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ØŒ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª</td>
                    <td>ÙˆØ§Ø¬Ù‡Ø© Odoo + API</td>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ø´Ø±ÙƒØ©</strong></td>
                    <td>Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø°ÙŠ ÙŠØ±Ø³Ù„ Ø§Ù„Ø·Ø±ÙˆØ¯. ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØªØªØ¨Ø¹ Ø·Ù„Ø¨Ø§ØªÙ‡</td>
                    <td>ÙˆØ§Ø¬Ù‡Ø© Odoo (Ù…Ø­Ø¯ÙˆØ¯) + API</td>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ø³Ø§Ø¦Ù‚</strong></td>
                    <td>ÙŠÙ†ÙØ° Ø§Ù„ØªØ³Ù„ÙŠÙ…Ø§ØªØŒ ÙŠØ­Ø¯Ù‘Ø« Ù…ÙˆÙ‚Ø¹Ù‡ØŒ ÙŠØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø´Ø±ÙˆØ·</td>
                    <td>API ÙÙ‚Ø· (ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ)</td>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ù…Ø³ØªÙ„Ù…</strong></td>
                    <td>ÙŠØ³ØªÙ„Ù… Ø§Ù„Ø·Ø±Ø¯ØŒ ÙŠÙ‚Ø¯Ù… OTP/Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±</td>
                    <td>Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø³Ø§Ø¦Ù‚</td>
                </tr>
            </table>

            <h2 id="ar-architecture">2. Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ØªÙ‚Ù†ÙŠØ©</h2>
            
            <h3>2.1 Ù‡ÙŠÙƒÙ„ Ø§Ù„ÙˆØ­Ø¯Ø©</h3>
            <pre><code>smart_delivery/
â”œâ”€â”€ __manifest__.py          # ØªÙƒÙˆÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø©
â”œâ”€â”€ __init__.py              # Ø§Ø³ØªÙŠØ±Ø§Ø¯ Python
â”œâ”€â”€ hooks.py                 # Ø®Ø·Ø§ÙØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª/Ø§Ù„ØªØ±Ø­ÙŠÙ„
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ api.py               # ÙˆØ­Ø¯Ø© ØªØ­ÙƒÙ… API REST
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ delivery_order.py    # Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
â”‚   â”œâ”€â”€ livreur.py           # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†
â”‚   â”œâ”€â”€ enterprise.py        # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø±ÙƒØ§Øª
â”‚   â”œâ”€â”€ sector_rule.py       # Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹ ÙˆØ§Ù„ØªØ³Ø¹ÙŠØ±
â”‚   â”œâ”€â”€ delivery_condition.py # Ø´Ø±ÙˆØ· Ø§Ù„ØªØ­Ù‚Ù‚
â”‚   â”œâ”€â”€ billing.py           # Ø§Ù„ÙÙˆØªØ±Ø©
â”‚   â”œâ”€â”€ delivery_route.py    # Ù…Ø³Ø§Ø±Ø§Øª GPS
â”‚   â””â”€â”€ api_log.py           # Ø³Ø¬Ù„ Ù…ÙƒØ§Ù„Ù…Ø§Øª API
â”œâ”€â”€ security/                # Ø§Ù„Ø£Ù…Ø§Ù†
â”œâ”€â”€ views/                   # Ø§Ù„Ø¹Ø±ÙˆØ¶ XML
â”œâ”€â”€ data/                    # Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
â””â”€â”€ utils/
    â””â”€â”€ jwt_auth.py          # Ù…ØµØ§Ø¯Ù‚Ø© JWT</code></pre>

            <h3>2.2 Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª</h3>
            <table>
                <tr>
                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                    <th>Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ©</th>
                    <th>Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</th>
                </tr>
                <tr>
                    <td>ÙˆØ­Ø¯Ø© Odoo</td>
                    <td><code>base</code></td>
                    <td>Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†ØŒ Ø§Ù„Ø´Ø±ÙƒØ§Ø¡</td>
                </tr>
                <tr>
                    <td>ÙˆØ­Ø¯Ø© Odoo</td>
                    <td><code>mail</code></td>
                    <td>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§ØªØŒ ØªØªØ¨Ø¹ Ø§Ù„ØªØºÙŠÙŠØ±Ø§ØªØŒ Ø§Ù„Ø£Ù†Ø´Ø·Ø©</td>
                </tr>
                <tr>
                    <td>ÙˆØ­Ø¯Ø© Odoo</td>
                    <td><code>account</code></td>
                    <td>Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©ØŒ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙÙˆØ§ØªÙŠØ±</td>
                </tr>
                <tr>
                    <td>ÙˆØ­Ø¯Ø© Odoo</td>
                    <td><code>sale</code></td>
                    <td>Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ù„Ù„ÙÙˆØªØ±Ø©</td>
                </tr>
                <tr>
                    <td>Python</td>
                    <td><code>PyJWT</code></td>
                    <td>Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…ÙˆØ² JWT</td>
                </tr>
            </table>

            <h2 id="ar-models">3. Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
            
            <h3>3.1 delivery.order - Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„</h3>
            <p>Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ø°ÙŠ ÙŠÙ…Ø«Ù„ Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„.</p>
            
            <table>
                <tr>
                    <th>Ø§Ù„Ø­Ù‚Ù„</th>
                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr><td>name</td><td>Char</td><td>Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„Ù…ÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (DEL00001)</td></tr>
                <tr><td>sector_type</td><td>Selection</td><td>Ø¹Ø§Ø¯ÙŠØŒ Ù…Ù…ÙŠØ²ØŒ Ø³Ø±ÙŠØ¹ØŒ Ù‡Ø´ØŒ Ø·Ø¨ÙŠ</td></tr>
                <tr><td>sender_id</td><td>Many2one</td><td>Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„Ù…Ø±Ø³Ù„Ø©</td></tr>
                <tr><td>receiver_phone</td><td>Char</td><td>Ù‡Ø§ØªÙ Ø§Ù„Ù…Ø³ØªÙ„Ù…</td></tr>
                <tr><td>pickup_lat/long</td><td>Float</td><td>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª GPS Ù†Ù‚Ø·Ø© Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</td></tr>
                <tr><td>drop_lat/long</td><td>Float</td><td>Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª GPS Ù†Ù‚Ø·Ø© Ø§Ù„ØªØ³Ù„ÙŠÙ…</td></tr>
                <tr><td>assigned_livreur_id</td><td>Many2one</td><td>Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ù…ÙØ¹ÙŠÙ‘Ù†</td></tr>
                <tr><td>status</td><td>Selection</td><td>Ù…Ø³ÙˆØ¯Ø©ØŒ Ù…ÙØ¹ÙŠÙ‘Ù†ØŒ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ØŒ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…ØŒ ÙØ´Ù„</td></tr>
                <tr><td>otp_required</td><td>Boolean</td><td>OTP Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„ØªØ­Ù‚Ù‚</td></tr>
                <tr><td>signature_required</td><td>Boolean</td><td>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ù…Ø·Ù„ÙˆØ¨</td></tr>
                <tr><td>photo_required</td><td>Boolean</td><td>Ø§Ù„ØµÙˆØ±Ø© Ù…Ø·Ù„ÙˆØ¨Ø©</td></tr>
                <tr><td>distance_km</td><td>Float</td><td>Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ø­Ø³ÙˆØ¨Ø© (Haversine)</td></tr>
            </table>

            <h3>3.2 delivery.livreur - Ø§Ù„Ø³Ø§Ø¦Ù‚</h3>
            <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù…Ø¹ ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ©.</p>
            
            <table>
                <tr>
                    <th>Ø§Ù„Ø­Ù‚Ù„</th>
                    <th>Ø§Ù„Ù†ÙˆØ¹</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr><td>name</td><td>Char</td><td>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</td></tr>
                <tr><td>phone</td><td>Char</td><td>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</td></tr>
                <tr><td>email</td><td>Char</td><td>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„)</td></tr>
                <tr><td>nni</td><td>Char</td><td>Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„ÙˆØ·Ù†ÙŠ</td></tr>
                <tr><td>nni_photo</td><td>Binary</td><td>ØµÙˆØ±Ø© ÙˆØ«ÙŠÙ‚Ø© NNI</td></tr>
                <tr><td>livreur_photo</td><td>Binary</td><td>ØµÙˆØ±Ø© Ø§Ù„Ù‡ÙˆÙŠØ©</td></tr>
                <tr><td>carte_grise_photo</td><td>Binary</td><td>ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø±Ù…Ø§Ø¯ÙŠØ© Ù„Ù„Ù…Ø±ÙƒØ¨Ø©</td></tr>
                <tr><td>assurance_photo</td><td>Binary</td><td>ØµÙˆØ±Ø© Ø§Ù„ØªØ£Ù…ÙŠÙ†</td></tr>
                <tr><td>vehicle_type</td><td>Selection</td><td>Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©ØŒ Ø³ÙŠØ§Ø±Ø©ØŒ Ø¯Ø±Ø§Ø¬Ø©ØŒ Ø´Ø§Ø­Ù†Ø©</td></tr>
                <tr><td>availability</td><td>Boolean</td><td>Ø§Ù„ØªÙˆÙØ± Ø§Ù„Ø­Ø§Ù„ÙŠ</td></tr>
                <tr><td>rating</td><td>Float</td><td>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ØªÙˆØ³Ø· (0-5)</td></tr>
                <tr><td>current_lat/long</td><td>Float</td><td>Ù…ÙˆÙ‚Ø¹ GPS Ø§Ù„Ø­Ø§Ù„ÙŠ</td></tr>
                <tr><td>registration_status</td><td>Selection</td><td>Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŒ Ù…ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠÙ‡ØŒ Ù…Ø±ÙÙˆØ¶</td></tr>
            </table>

            <h3>3.3 sector.rule - Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹</h3>
            <p>ØªÙƒÙˆÙŠÙ† Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØªØ³Ø¹ÙŠØ±Ù‡Ø§.</p>
            
            <table>
                <tr>
                    <th>Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹</th>
                    <th>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (MRU)</th>
                    <th>Ø§Ù„Ø±Ø³ÙˆÙ…/ÙƒÙ…</th>
                    <th>Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª</th>
                </tr>
                <tr>
                    <td><strong>Ø¹Ø§Ø¯ÙŠ</strong></td>
                    <td>50</td>
                    <td>10</td>
                    <td>Ù„Ø§ Ø´ÙŠØ¡</td>
                </tr>
                <tr>
                    <td><strong>Ù…Ù…ÙŠØ²</strong></td>
                    <td>100</td>
                    <td>10</td>
                    <td>OTP + Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</td>
                </tr>
                <tr>
                    <td><strong>Ø³Ø±ÙŠØ¹</strong></td>
                    <td>150</td>
                    <td>15</td>
                    <td>OTP + Ø§Ù„ØµÙˆØ±Ø©</td>
                </tr>
                <tr>
                    <td><strong>Ù‡Ø´</strong></td>
                    <td>120</td>
                    <td>12</td>
                    <td>OTP + Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ + Ø§Ù„ØµÙˆØ±Ø©</td>
                </tr>
                <tr>
                    <td><strong>Ø·Ø¨ÙŠ</strong></td>
                    <td>200</td>
                    <td>20</td>
                    <td>OTP + Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ + Ø§Ù„ØµÙˆØ±Ø© + Ø§Ù„Ø¨ÙŠÙˆÙ…ØªØ±ÙŠØ©</td>
                </tr>
            </table>
            
            <div class="info-box">
                <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ø£ÙˆÙ„ 5 ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ø§Øª Ù…Ø´Ù…ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ. ØªÙØ·Ø¨Ù‚ Ø±Ø³ÙˆÙ… Ø§Ù„ÙƒÙŠÙ„ÙˆÙ…ØªØ±Ø§Øª Ø¨Ø¹Ø¯ Ø°Ù„Ùƒ.
            </div>

            <h2 id="ar-workflow">4. Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„</h2>
            
            <h3>4.1 Ø¯ÙˆØ±Ø© Ø­ÙŠØ§Ø© Ø§Ù„Ø·Ù„Ø¨</h3>
            <div class="diagram">
                <div class="diagram-box">ğŸ“ Ù…Ø³ÙˆØ¯Ø©<br>(draft)</div>
                <span class="diagram-arrow">â†</span>
                <div class="diagram-box">ğŸ‘¤ Ù…ÙØ¹ÙŠÙ‘Ù†<br>(assigned)</div>
                <span class="diagram-arrow">â†</span>
                <div class="diagram-box">ğŸšš ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚<br>(on_way)</div>
                <span class="diagram-arrow">â†</span>
                <div class="diagram-box">âœ… ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…<br>(delivered)</div>
            </div>
            
            <h3>4.2 Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…ÙØµÙ„Ø©</h3>
            <ol>
                <li><strong>Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨</strong>
                    <ul>
                        <li>ØªÙ†Ø´Ø¦ Ø§Ù„Ø´Ø±ÙƒØ© Ø·Ù„Ø¨Ø§Ù‹ Ø¹Ø¨Ø± ÙˆØ§Ø¬Ù‡Ø© Odoo Ø£Ùˆ API</li>
                        <li>ØªÙØ­Ø¯Ø¯ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª GPS Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù… ÙˆØ§Ù„ØªØ³Ù„ÙŠÙ…</li>
                        <li>ÙŠØ­Ø¯Ø¯ Ù†ÙˆØ¹ Ø§Ù„Ù‚Ø·Ø§Ø¹ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªØ­Ù‚Ù‚</li>
                        <li>ÙŠÙÙ†Ø´Ø£ OTP Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø·Ù„ÙˆØ¨Ø§Ù‹</li>
                    </ul>
                </li>
                <li><strong>Ø§Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</strong>
                    <ul>
                        <li>ÙŠØ­Ø³Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¯Ø±Ø¬Ø© Ù„ÙƒÙ„ Ø³Ø§Ø¦Ù‚ Ù…ØªØ§Ø­</li>
                        <li>Ø§Ù„Ø¯Ø±Ø¬Ø© = (Ø§Ù„Ù…Ø³Ø§ÙØ© Ã— 50%) + (Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ã— 20%) + (Ø§Ù„Ø±Ø§Ø­Ø© Ã— 10%) + (Ø§Ù„Ø³Ø±Ø¹Ø© Ã— 20%)</li>
                        <li>ÙŠÙØ¹ÙŠÙ‘Ù† Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø°Ùˆ Ø£ÙØ¶Ù„ Ø¯Ø±Ø¬Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</li>
                    </ul>
                </li>
                <li><strong>ØªÙ†ÙÙŠØ° Ø§Ù„ØªÙˆØµÙŠÙ„</strong>
                    <ul>
                        <li>ÙŠÙ‚Ø¨Ù„ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ</li>
                        <li>ÙŠØ³ØªÙ„Ù… Ø§Ù„Ø·Ø±Ø¯ ÙˆÙŠØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø§Ù„Ø© "ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚"</li>
                        <li>ÙŠÙØ­Ø¯Ù‘Ø« Ù…ÙˆÙ‚Ø¹ GPS ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ</li>
                    </ul>
                </li>
                <li><strong>Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„ØªØ³Ù„ÙŠÙ…</strong>
                    <ul>
                        <li>Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ØŒ ÙŠÙ‚Ø¯Ù… Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</li>
                        <li>ÙŠÙ‚Ø¯Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù… OTP Ø§Ù„Ù…Ø³ØªÙ„Ù… Ø¹Ø¨Ø± SMS</li>
                        <li>Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø·Ù„ÙˆØ¨Ø§Ù‹</li>
                        <li>Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø·Ù„ÙˆØ¨Ø©</li>
                    </ul>
                </li>
                <li><strong>Ø§Ù„ÙÙˆØªØ±Ø©</strong>
                    <ul>
                        <li>ØªÙÙ†Ø´Ø£ Ø§Ù„ÙÙˆØªØ±Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…</li>
                        <li>ØªÙÙ†Ø´Ø£ ÙØ§ØªÙˆØ±Ø© Odoo Ù…Ø¹ Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù…ÙØµÙ„Ø©</li>
                        <li>Ø§Ù„Ø¯ÙØ¹ Ù†Ù‚Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ… (COD)</li>
                    </ul>
                </li>
            </ol>

            <h3>4.3 ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†</h3>
            <ol>
                <li>ÙŠØ³Ø¬Ù„ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø¹Ø¨Ø± API Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø¹ ÙˆØ«Ø§Ø¦Ù‚Ù‡</li>
                <li>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ©: <strong>Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</strong> (pending)</li>
                <li>ÙŠØªØ­Ù‚Ù‚ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù…Ù† Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</li>
                <li>Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© â† ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ØŒ ÙŠÙ…ÙƒÙ†Ù‡ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª</li>
                <li>Ø§Ù„Ø±ÙØ¶ â† Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¹ Ø§Ù„Ø³Ø¨Ø¨ØŒ ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</li>
            </ol>

            <h2 id="ar-odoo">5. ÙˆØ­Ø¯Ø§Øª Odoo Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</h2>
            
            <h3>5.1 ÙˆØ­Ø¯Ø© Base</h3>
            <ul>
                <li><strong>res.users</strong>: Ù…ÙˆØ³Ù‘Ø¹ Ù„Ø¥Ø¶Ø§ÙØ© Ù†ÙˆØ¹ Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙˆØµÙŠÙ„</li>
                <li><strong>res.partner</strong>: Ù…ÙˆØ³Ù‘Ø¹ Ù„ØªØ­Ø¯ÙŠØ¯ Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</li>
                <li><strong>ir.sequence</strong>: ØªØ³Ù„Ø³Ù„ DEL00001 Ù„Ù„Ø·Ù„Ø¨Ø§Øª</li>
            </ul>

            <h3>5.2 ÙˆØ­Ø¯Ø© Mail</h3>
            <ul>
                <li><strong>mail.thread</strong>: Ù…ÙˆØ±ÙˆØ« Ù…Ù† Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†</li>
                <li>ÙŠØªÙŠØ­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª (Ø³Ø¬Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„)</li>
                <li>ØªØªØ¨Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø­Ù‚ÙˆÙ„</li>
            </ul>

            <h3>5.3 ÙˆØ­Ø¯Ø© Account</h3>
            <ul>
                <li><strong>account.move</strong>: Ø¥Ù†Ø´Ø§Ø¡ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</li>
                <li><strong>account.payment</strong>: ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª</li>
                <li><strong>account.journal</strong>: Ø¯ÙØ§ØªØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ§Ù„ØµÙ†Ø¯ÙˆÙ‚</li>
            </ul>

            <h3>5.4 ÙˆØ­Ø¯Ø© Sale</h3>
            <ul>
                <li><strong>product.product</strong>: Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ù„ÙƒÙ„ Ù†ÙˆØ¹ ØªÙˆØµÙŠÙ„</li>
                <li>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©: DEL-STD, DEL-PRM, DEL-EXP, DEL-FRG, DEL-MED</li>
            </ul>

            <h2 id="ar-security">6. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</h2>
            
            <h3>6.1 Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†</h3>
            <table>
                <tr>
                    <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©</th>
                    <th>ØªØ±Ø« Ù…Ù†</th>
                    <th>Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</th>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ø³Ø§Ø¦Ù‚</strong></td>
                    <td>-</td>
                    <td>API ÙÙ‚Ø·ØŒ Ø¨Ø¯ÙˆÙ† ÙˆØµÙˆÙ„ Ù„ÙˆØ§Ø¬Ù‡Ø© Odoo</td>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ø´Ø±ÙƒØ©</strong></td>
                    <td>base.group_user</td>
                    <td>ÙˆØµÙˆÙ„ Smart DeliveryØŒ Ø¹Ø±Ø¶/Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨Ø§ØªÙ‡</td>
                </tr>
                <tr>
                    <td><strong>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</strong></td>
                    <td>group_enterprise</td>
                    <td>ÙˆØµÙˆÙ„ ÙƒØ§Ù…Ù„ØŒ Ø§Ù„ØªÙƒÙˆÙŠÙ†ØŒ Ø§Ù„Ø­Ø°Ù</td>
                </tr>
            </table>

            <h3>6.2 Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„ÙˆØµÙˆÙ„</h3>
            <table>
                <tr>
                    <th>Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</th>
                    <th>Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</th>
                    <th>Ø§Ù„Ø´Ø±ÙƒØ©</th>
                    <th>Ø§Ù„Ø³Ø§Ø¦Ù‚</th>
                </tr>
                <tr>
                    <td>delivery.order</td>
                    <td>CRUD</td>
                    <td>CRU</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>delivery.livreur</td>
                    <td>CRUD</td>
                    <td>R</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>sector.rule</td>
                    <td>CRUD</td>
                    <td>R</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>delivery.billing</td>
                    <td>CRUD</td>
                    <td>R</td>
                    <td>-</td>
                </tr>
            </table>

            <h2 id="ar-api">7. ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª REST</h2>
            
            <h3>7.1 Ù…ØµØ§Ø¯Ù‚Ø© JWT</h3>
            <p>Ø¬Ù…ÙŠØ¹ Ø·Ù„Ø¨Ø§Øª API (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ³Ø¬ÙŠÙ„) ØªØªØ·Ù„Ø¨ Ø±Ù…Ø² JWT ÙÙŠ Ø§Ù„Ø±Ø£Ø³:</p>
            <pre><code>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...</code></pre>
            
            <h3>7.2 Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</h3>
            
            <h4>ğŸ” Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©</h4>
            <table>
                <tr>
                    <th>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©</th>
                    <th>Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/auth/login</td>
                    <td>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ù…Ø² JWT</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/auth/logout</td>
                    <td>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</td>
                </tr>
            </table>

            <h4>ğŸ“ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (Ø¹Ø§Ù…)</h4>
            <table>
                <tr>
                    <th>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©</th>
                    <th>Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/sectors</td>
                    <td>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/register</td>
                    <td>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¦Ù‚</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/enterprise/register</td>
                    <td>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø´Ø±ÙƒØ©</td>
                </tr>
            </table>

            <h4>ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ø§Ù„Ø´Ø±ÙƒØ©)</h4>
            <table>
                <tr>
                    <th>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©</th>
                    <th>Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/enterprise/orders</td>
                    <td>Ù‚Ø§Ø¦Ù…Ø© Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/enterprise/orders/create</td>
                    <td>Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨</td>
                </tr>
            </table>

            <h4>ğŸšš Ø§Ù„Ø³Ø§Ø¦Ù‚</h4>
            <table>
                <tr>
                    <th>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©</th>
                    <th>Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/livreur/profile</td>
                    <td>Ù…Ù„Ù Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø´Ø®ØµÙŠ</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/location</td>
                    <td>ØªØ­Ø¯ÙŠØ« Ù…ÙˆÙ‚Ø¹ GPS</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/smart_delivery/api/livreur/orders</td>
                    <td>Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙØ¹ÙŠÙ‘Ù†Ø©</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/livreur/orders/{id}/complete</td>
                    <td>Ø¥Ù†Ù‡Ø§Ø¡ Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚</td>
                </tr>
            </table>

            <h4>âœ… Ø§Ù„ØªØ­Ù‚Ù‚</h4>
            <table>
                <tr>
                    <th>Ø§Ù„Ø·Ø±ÙŠÙ‚Ø©</th>
                    <th>Ø§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</th>
                    <th>Ø§Ù„ÙˆØµÙ</th>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/verify-otp</td>
                    <td>Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù…Ø² OTP</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/signature</td>
                    <td>ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/smart_delivery/api/orders/{id}/photo</td>
                    <td>ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„ØµÙˆØ±Ø©</td>
                </tr>
            </table>

            <h2 id="ar-billing">8. Ø§Ù„ÙÙˆØªØ±Ø©</h2>
            
            <h3>8.1 Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ¹Ø±ÙØ©</h3>
            <pre><code>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ = Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ + Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ø³Ø§ÙØ©

Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ø³Ø§ÙØ© = max(0, Ø§Ù„Ù…Ø³Ø§ÙØ©_ÙƒÙ… - Ø§Ù„Ù…Ø³Ø§ÙØ©_Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©) Ã— Ø§Ù„Ø±Ø³ÙˆÙ…_Ù„ÙƒÙ„_ÙƒÙ…

Ù…Ø«Ø§Ù„ Ù„ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ù…Ø³Ø§ÙØ© 12 ÙƒÙ…:
- Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: 150 MRU
- Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©: 5 ÙƒÙ…
- Ø§Ù„Ø±Ø³ÙˆÙ…/ÙƒÙ…: 15 MRU
- Ø±Ø³ÙˆÙ… Ø§Ù„Ù…Ø³Ø§ÙØ©: (12 - 5) Ã— 15 = 105 MRU
- Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 150 + 105 = 255 MRU</code></pre>

            <h3>8.2 Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…</h3>
            <p>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙˆØ­ÙŠØ¯Ø©: <strong>Ù†Ù‚Ø¯Ø§Ù‹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…</strong> (COD)</p>
            <ul>
                <li>ÙŠØ¬Ù…Ø¹ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø¯ÙØ¹ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ„Ù…</li>
                <li>Ø²Ø± "ÙˆØ¶Ø¹ Ø¹Ù„Ø§Ù…Ø© Ù…Ø¯ÙÙˆØ¹" ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ÙŠÙ†Ø´Ø¦ Ø§Ù„ØªØ³ÙˆÙŠØ©</li>
                <li>Ù…Ø·Ø§Ø¨Ù‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…Ø¹ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</li>
            </ul>

            <h2 id="ar-installation">9. Ø§Ù„ØªØ«Ø¨ÙŠØª</h2>
            
            <h3>9.1 Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©</h3>
            <pre><code># ØªØ«Ø¨ÙŠØª Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª Python
pip install PyJWT cryptography</code></pre>

            <h3>9.2 ØªØ«Ø¨ÙŠØª Ø§Ù„ÙˆØ­Ø¯Ø©</h3>
            <ol>
                <li>Ù†Ø³Ø® Ù…Ø¬Ù„Ø¯ <code>smart_delivery</code> Ø¥Ù„Ù‰ Ø¯Ù„ÙŠÙ„ addons</li>
                <li>ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª ÙÙŠ Odoo</li>
                <li>Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† "Smart Delivery" ÙˆØ§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ ØªØ«Ø¨ÙŠØª</li>
            </ol>

            <h3>9.3 Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø¨Ø¹Ø¯ Ø§Ù„ØªØ«Ø¨ÙŠØª</h3>
            <ol>
                <li>ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© (Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª)</li>
                <li>Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©</li>
                <li>ØªÙƒÙˆÙŠÙ† Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±</li>
                <li>Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙˆÙ„ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¤ÙˆÙ„</li>
            </ol>

            <div class="warning-box">
                <strong>Ù…Ù‡Ù…:</strong> ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ØŒ Ù‚Ù… Ø¨ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø³Ø±ÙŠ JWT ÙÙŠ <code>utils/jwt_auth.py</code>
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; padding: 40px; color: #666;">
            <p>Smart Delivery Documentation v18.0.1.4.0</p>
            <p>Â© 2024 Smart Delivery Team</p>
            <p style="margin-top: 20px; font-size: 0.9em;">
                Pour gÃ©nÃ©rer un PDF: Ouvrez ce fichier dans un navigateur et utilisez Imprimer â†’ Enregistrer en PDF<br>
                Ù„Ø¥Ù†Ø´Ø§Ø¡ PDF: Ø§ÙØªØ­ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù ÙÙŠ Ù…ØªØµÙØ­ ÙˆØ§Ø³ØªØ®Ø¯Ù… Ø·Ø¨Ø§Ø¹Ø© â† Ø­ÙØ¸ ÙƒÙ€ PDF
            </p>
        </div>
    </div>
</body>
</html>

